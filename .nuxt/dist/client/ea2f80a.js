(window.webpackJsonp=window.webpackJsonp||[]).push([[0,6],{411:function(t,e,n){var content=n(422);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(175).default)("6c946b55",content,!1,{sourceMap:!1})},421:function(t,e,n){"use strict";n(411)},422:function(t,e,n){var o=n(174)((function(i){return i[1]}));o.push([t.i,".certification-image{display:block;height:auto;margin:0 auto;max-width:100%;width:1000px}",""]),o.locals={},t.exports=o},426:function(t,e,n){var content=n(437);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(175).default)("4c041495",content,!1,{sourceMap:!1})},429:function(t,e,n){"use strict";n.r(e);n(66),n(22),n(67),n(176);var o={data:function(){return{userName:"",tempUserName:"",editingUserName:!1}},props:{score:{type:Number,default:0}},computed:{levelMsg:function(){return this.score<=50?this.$t("common.level_msg_6"):this.score>50&&this.score<=60?this.$t("common.level_msg_5"):this.score>60&&this.score<=70?this.$t("common.level_msg_4"):this.score>70&&this.score<=80?this.$t("common.level_msg_3"):this.score>80&&this.score<=90?this.$t("common.level_msg_2"):this.$t("common.level_msg_1")}},methods:{editUserName:function(){this.editingUserName=!0},saveUserName:function(){this.editingUserName=!1,this.userName=this.tempUserName,this.$cookies.set("userName",this.tempUserName),this.$emit("userNameChanged")}},mounted:function(){this.userName=this.tempUserName=this.$cookies.get("userName")||"your name"}},r=(n(421),n(77)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"certification"},[e("img",{staticClass:"certification-image",attrs:{src:"/cert_pic?username=".concat(t.userName,"&score=").concat(t.score,"&levelmsg=").concat(t.levelMsg),width:"1000",height:"700"}}),t._v(" "),t.editingUserName?t._e():e("button",{staticClass:"menuBtn primary",on:{click:function(e){return t.editUserName()}}},[t._v("\n    "+t._s(t.$t("common.enter_your_name"))+"\n  ")]),t._v(" "),t.editingUserName?t._e():e("a",{staticClass:"menuBtn primary",attrs:{href:"https://www.facebook.com/sharer/sharer.php?u=https://pitchtest.boggy.tw/".concat(encodeURI(t.userName).replace(/%/g,"="),"/").concat(encodeURI(t.score).replace(/%/g,"="),"/").concat(encodeURI(t.levelMsg).replace(/%/g,"=")),target:"_blank"}},[t._v("\n    "+t._s(t.$t("common.share_to_fb"))+"\n  ")]),t._v(" "),t.editingUserName?e("div",{staticClass:"userNameModel"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.saveUserName()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempUserName,expression:"tempUserName"}],attrs:{placeholder:t.$t("common.enter_your_name"),type:"text",required:""},domProps:{value:t.tempUserName},on:{input:function(e){e.target.composing||(t.tempUserName=e.target.value)}}}),t._v(" "),e("button",{staticClass:"menuBtn primary"},[t._v("\n        "+t._s(t.$t("common.submit"))+"\n      ")])])]):t._e()])}),[],!1,null,null,null);e.default=component.exports},434:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDaGV2cm9uX3NtYWxsX2xlZnQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGZpbGw9IiNmZmZmZmYiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGQ9Ik0xMi4xNDEsMTMuNDE4YzAuMjY4LDAuMjcxLDAuMjY4LDAuNzA5LDAsMC45NzhjLTAuMjY4LDAuMjctMC43MDEsMC4yNzItMC45NjksMGwtMy44My0zLjkwOA0KCWMtMC4yNjgtMC4yNy0wLjI2OC0wLjcwNywwLTAuOTc5bDMuODMtMy45MDhjMC4yNjctMC4yNywwLjcwMS0wLjI3LDAuOTY5LDBjMC4yNjgsMC4yNzEsMC4yNjgsMC43MDksMCwwLjk3OEw5LDEwTDEyLjE0MSwxMy40MTh6Ig0KCS8+DQo8L3N2Zz4NCg=="},435:function(t,e,n){t.exports=n.p+"img/tuning_fork.fa70513.svg"},436:function(t,e,n){"use strict";n(426)},437:function(t,e,n){var o=n(174)((function(i){return i[1]}));o.push([t.i,'.gameStage .gameScore{color:#fff;min-width:80px;position:absolute;right:0;text-align:center;text-shadow:2px 2px 0 #5cd4ca;top:0}.gameStage .gameScore .title{border:1px solid #fff;border-radius:3px;font-size:13rem;padding:2px}.gameStage .gameScore .num{font-size:55rem;font-weight:500}.gameStage .gameStep{color:#fff;font-size:40rem;padding:10px 0;text-shadow:2px 2px 0 #5cd4ca}.gameStage .countdown{color:#fff;margin:20px 0;text-shadow:2px 2px 0 #5cd4ca}.gameStage .countdown .countdownBar{background:#5cd4ca;border-radius:20px;color:#fff;margin-top:5px;position:relative}.gameStage .countdown .countdownBar--inner{background:#d6fbd2;border-radius:20px;height:6px;transition:.2s}.gameStage .pitchDiff{color:#fff;margin-top:50px;text-align:center;text-shadow:2px 2px 0 #5cd4ca}.gameStage .tuneBtns{display:flex;margin:10px -10px 0}.gameStage .tuneBtns .tuneBtn{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;border:0;border-radius:10px 10px 0 0;box-shadow:0 0 10px rgba(0,0,0,.05);color:#435e5f;flex:1;font-family:"Varela Round",sans-serif;font-size:16rem;font-weight:500;margin:0 10px;opacity:.9;outline:none;padding:50px 20px}.gameStage .tuneBtns .tuneBtn img{display:block;margin:10px auto;width:60px}.gameStage .tuneBtns .tuneBtn.active,.gameStage .tuneBtns .tuneBtn:hover{box-shadow:0 0 20px #fff;opacity:1}.gameStage .tuneBtns .tuneBtn:focus{box-shadow:0 0 0 4px #5ed4ca}.gameStage .tuneBtns .tuneBtn:disabled{color:rgba(67,94,95,.4);opacity:.7}.gameStage .ansBtns{display:flex;margin:0 -10px 10px}.gameStage .ansBtns .ansBtn{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--primary);border:0;border-radius:0 0 10px 10px;box-shadow:0 0 10px rgba(0,0,0,.05);color:#fff;flex:1;font-family:"Varela Round",sans-serif;font-size:16rem;font-weight:500;margin:0 10px;opacity:.9;outline:none;padding:20px}.gameStage .ansBtns .ansBtn:hover{opacity:1}.gameStage .ansBtns .ansBtn:focus{box-shadow:0 0 0 4px #5ed4ca}.gameStage .ansBtns .ansBtn:disabled{color:hsla(0,0%,100%,.4);opacity:.7}.gameStage .ansTitle{margin-top:20px;text-align:center}.gameStage .ansAnimation{align-items:center;animation:answerAnimation 1s;bottom:0;color:#fc3;display:flex;font-family:"Fredoka One",cursive;font-size:100px;font-weight:900;justify-content:center;left:0;position:absolute;right:0;text-shadow:-4px -4px 0 #fff,0 -4px 0 #fff,-4px 0 0 #fff,0 4px 0 #fff,4px 0 0 #fff,6px 6px 0 #fff,6px 20px 16px rgba(0,0,0,.067);top:0}.gameStage .ansAnimation.wrongAnsAnimation{color:#f99}',""]),o.locals={},t.exports=o},440:function(t,e,n){"use strict";n.r(e);var o=n(10),r=(n(48),n(16),n(111),n(259),{data:function(){var t=[15,14,13,12,10,9,8,7,6,5,4,3,4,3,1,2,3,1,2,1],e=20*t.length-t.reduce((function(a,b){return a+b}));return{gameover:!1,showingAnswer:!1,rightAnsAnimationVisible:!1,wrongAnsAnimationVisible:!1,playingTune:null,ques:t,baseTunes:[220,246.94,261.63,293.66,329.63,349.23,392,440,493.88,523.25,587.33,659.26,698.46,783.99,880],questionWaveRange:20,maxScore:e,timeLimitPerQuestion:10,timeLimitInterval:null,countdownTimeLeft:null,countdownInterval:null,ansDisplayDuration:1,baseTune:null,currentAns:null,ansTunes:null,questionStep:0,totalScore:0,autoplayTune1:null,autoplayTune2:null,startTime:null,gameDuration:null,context:null,analyser:null,gainNode:null}},props:["scoreCookieKey"],computed:{displayStep:function(){return this.questionStep+1},displayScore:function(){return Math.floor(this.totalScore/this.maxScore*1e4)/100},countdownBarWidth:function(){return(this.timeLimitPerQuestion-this.countdownTimeLeft)/this.timeLimitPerQuestion*100},pitchDiff:function(){return this.ansTunes?Math.abs(this.ansTunes[0]-this.ansTunes[1]):0}},methods:{initGame:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("api/token");case 3:n=e.sent,t.$axios.setToken(n.data.token),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:t.startTime=(new Date).getTime(),t.resetAudioContext(),t.showStep(t.questionStep);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))()},showStep:function(t){var e=this;clearInterval(this.timeLimitInterval),clearInterval(this.countdownInterval),this.showingAnswer=!1,this.currentAns=Math.round(Math.random()),this.baseTune=this.baseTunes[Math.floor(Math.random()*this.baseTunes.length)];var n=this.baseTune+this.ques[t],o=this.baseTune;0===this.currentAns?this.ansTunes=[n,o]:this.ansTunes=[o,n],this.autoplayTune1=setTimeout(this.playTune,500,0),this.autoplayTune2=setTimeout(this.playTune,1500,1),this.timeLimitInterval=setTimeout((function(){e.showAns(!1)}),1e3*this.timeLimitPerQuestion),this.countdownTimeLeft=this.timeLimitPerQuestion,this.countdownInterval=setInterval((function(){e.countdownTimeLeft--}),1e3)},clearAutoplayTuneInterval:function(){clearInterval(this.autoplayTune1),clearInterval(this.autoplayTune2)},showAns:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearInterval(this.timeLimitInterval),clearInterval(this.countdownInterval),this.countdownTimeLeft=0,this.showingAnswer=!0,e?(this.totalScore+=20-this.ques[this.questionStep],this.showRightAnsAnimation()):this.showWrongAnsAnimation(),this.questionStep>18?setTimeout((function(){t.endGame()}),1e3*this.ansDisplayDuration):setTimeout((function(){t.questionStep++,t.showStep(t.questionStep)}),1e3*this.ansDisplayDuration)},showRightAnsAnimation:function(){var t=this;this.rightAnsAnimationVisible=!0,setTimeout((function(){t.rightAnsAnimationVisible=!1}),1e3)},showWrongAnsAnimation:function(){var t=this;this.wrongAnsAnimationVisible=!0,setTimeout((function(){t.wrongAnsAnimationVisible=!1}),1e3)},resetAudioContext:function(){this.context&&this.context.close(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.gainNode=this.context.createGain(),this.analyser.connect(this.context.destination),this.gainNode.gain.value=.25,this.gainNode.connect(this.analyser)},playTune:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sine",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.context?this.context.currentTime:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=this.context.createOscillator();c.type=n,c.frequency.value=this.ansTunes[t],c.detune.value=0,c.connect(this.gainNode),c.start(o),c.stop(o+r),this.playingTune=t,setTimeout((function(){e.playingTune=null}),1e3*r)},endGame:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(new Date).getTime(),t.gameDuration=n-t.startTime,t.gameover=!0,t.showingAnswer=!1,o={date:(new Date).getTime(),score:t.displayScore,duration:t.gameDuration},(r=t.$cookies.get(t.scoreCookieKey)||[]).push(o),r.sort((function(a,b){return a.score!==b.score?b.score-a.score:a.duration-b.duration})),t.$cookies.set(t.scoreCookieKey,r),t.sendScoreToServer();case 10:case"end":return e.stop()}}),e)})))()},sendScoreToServer:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={date:(new Date).getTime(),score:t.displayScore,duration:t.gameDuration,name:t.$cookies.get("userName")||"unknow"},e.next=4,t.$axios.post("api/score",n);case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},replay:function(){this.questionStep=0,this.totalScore=0,this.gameover=!1,this.initGame()},back:function(){clearInterval(this.timeLimitInterval),clearInterval(this.countdownInterval),this.questionStep=0,this.totalScore=0,this.$emit("endGame")}},mounted:function(){this.initGame()}}),c=r,l=(n(436),n(77)),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"gameStage"},[e("img",{staticClass:"backBtn",attrs:{src:n(434),alt:"Back"},on:{click:function(e){return t.back()}}}),t._v(" "),e("div",{staticClass:"gameStep"},[e("span",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("common.stage"))+"\n    ")]),t._v(" "),e("span",{staticClass:"num"},[t._v("\n      "+t._s(t.displayStep)+"\n    ")])]),t._v(" "),e("div",{staticClass:"gameScore"},[e("div",{staticClass:"num"},[t._v("\n      "+t._s(t.displayScore)+"\n    ")]),t._v(" "),e("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("common.score"))+"\n    ")])]),t._v(" "),e("div",{staticClass:"countdown"},[t._v("\n    "+t._s(t.$t("common.time_left"))+"\n    :\n    "+t._s(t.countdownTimeLeft)+"\n    "),e("div",{staticClass:"countdownBar"},[e("div",{staticClass:"countdownBar--inner",style:"width: ".concat(t.countdownBarWidth,"%")})])]),t._v(" "),e("div",{staticClass:"pitchDiff"},[t._v("\n    "+t._s(t.$t("common.pitch_diff",{diff:t.pitchDiff}))+"\n  ")]),t._v(" "),e("div",{staticClass:"tuneBtns"},t._l(2,(function(i,o){return e("button",{key:"tuneBtn".concat(o),staticClass:"tuneBtn",class:{active:t.playingTune===o},attrs:{disabled:t.showingAnswer||t.gameover},on:{click:function(e){t.clearAutoplayTuneInterval(),t.resetAudioContext(),t.playTune(o)}}},[e("img",{attrs:{src:n(435),alt:"Tune".concat(i)}}),t._v("\n      "+t._s(t.showingAnswer?"".concat(t.ansTunes[o],"Hz"):"Tune ".concat(i))+"\n    ")])})),0),t._v(" "),e("div",{staticClass:"ansBtns"},t._l(2,(function(i,n){return e("button",{key:"ansBtn".concat(n),staticClass:"ansBtn",attrs:{disabled:t.showingAnswer||t.gameover},on:{click:function(e){t.clearAutoplayTuneInterval(),t.resetAudioContext(),t.showAns(n===t.currentAns)}}},[t._v("\n      "+t._s(t.$t("common.n_tune_higher",{n:i}))+"\n    ")])})),0),t._v(" "),e("div",{staticClass:"ansTitle"},[t._v("\n    "+t._s(t.$t("common.which_one_is_higher"))+"\n  ")]),t._v(" "),t.rightAnsAnimationVisible?e("div",{staticClass:"ansAnimation rightAnsAnimation"},[t._v("\n    Right!\n  ")]):t._e(),t._v(" "),t.wrongAnsAnimationVisible?e("div",{staticClass:"ansAnimation wrongAnsAnimation"},[t._v("\n    Wrong!        \n  ")]):t._e(),t._v(" "),t.gameover?e("div",{staticClass:"endScreen modal"},[e("div",{staticClass:"modalHeader"},[t._v("\n      "+t._s(t.$t("common.your_certification"))+"\n    ")]),t._v(" "),e("div",{staticClass:"modalBody"},[e("Certification",{attrs:{score:t.displayScore},on:{userNameChanged:function(e){return t.sendScoreToServer()}}}),t._v(" "),e("button",{staticClass:"menuBtn",on:{click:function(e){return t.replay()}}},[t._v("\n        "+t._s(t.$t("common.replay"))+"\n      ")]),t._v(" "),e("button",{staticClass:"menuBtn",on:{click:function(e){return t.$emit("showRecords")}}},[t._v("\n        "+t._s(t.$t("common.show_records"))+"\n      ")]),t._v(" "),e("button",{staticClass:"menuBtn",on:{click:function(e){return t.$emit("endGame")}}},[t._v("\n        "+t._s(t.$t("common.close"))+"\n      ")])],1)]):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Certification:n(429).default})}}]);